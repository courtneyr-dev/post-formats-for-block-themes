(()=>{"use strict";var e,l={600:()=>{const e=window.wp.blocks,l=window.React,a=window.wp.i18n,t=window.wp.blockEditor,o=window.wp.components,c=window.wp.element,s=JSON.parse('{"UU":"chatlog/conversation"}');(0,e.registerBlockType)(s.UU,{edit:function({attributes:e,setAttributes:s}){const{rawTranscript:r,source:n,displayStyle:i,showAvatars:h,showTimestamps:p,timestampFormat:b,collapseThreads:g,maxVisibleMessages:m,showParticipantList:u,highlightCurrentUser:d,deviceFrame:_}=e,[k,v]=(0,c.useState)(null),[T,w]=(0,c.useState)(0),f=(0,t.useBlockProps)({className:`chatlog-editor chatlog--${i}`});return(0,c.useEffect)(()=>{r?r.includes('"type":"message"')&&r.includes('"user":')?(v("Slack"),w(95)):/^\[[\d\/]+,\s*[\d:]+\]/.test(r)?(v("WhatsApp"),w(90)):/^WEBVTT/m.test(r)||r.includes("<v ")?(v("VTT Captions"),w(95)):/^\d+\s*\n\d{2}:\d{2}:\d{2},\d{3}\s*-->/m.test(r)?(v("SRT Subtitles"),w(95)):r.includes("#")&&/\d{1,2}:\d{2}\s*[AP]M/i.test(r)?(v("Discord"),w(75)):/\d{1,2}:\d{2}\s*[AP]M/i.test(r)?(v("Slack/Teams/Telegram/Signal"),w(60)):(v("Unknown"),w(30)):v(null)},[r]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(t.InspectorControls,null,(0,l.createElement)(o.PanelBody,{title:(0,a.__)("Display Settings","chatlog-block")},(0,l.createElement)(o.SelectControl,{label:(0,a.__)("Platform","chatlog-block"),value:n,options:[{label:(0,a.__)("Auto-detect","chatlog-block"),value:"auto"},{label:"Slack",value:"slack"},{label:"Discord",value:"discord"},{label:"Microsoft Teams",value:"teams"},{label:"Telegram",value:"telegram"},{label:"WhatsApp",value:"whatsapp"},{label:"Signal",value:"signal"},{label:(0,a.__)("— Transcript Formats —","chatlog-block"),value:"",disabled:!0},{label:"WebVTT (.vtt)",value:"vtt"},{label:"SubRip (.srt)",value:"srt"},{label:"Plain Text Transcript (.txt, .md, .doc, .html, .rtf)",value:"transcript"}],onChange:e=>s({source:e}),help:(0,a.__)("Select the chat platform or transcript format. Auto-detect works for most formats.","chatlog-block")}),(0,l.createElement)(o.SelectControl,{label:(0,a.__)("Display Style","chatlog-block"),value:i,options:[{label:(0,a.__)("Bubbles","chatlog-block"),value:"bubbles"},{label:(0,a.__)("IRC","chatlog-block"),value:"irc"},{label:(0,a.__)("Transcript","chatlog-block"),value:"transcript"},{label:(0,a.__)("Timeline","chatlog-block"),value:"timeline"}],onChange:e=>s({displayStyle:e}),help:(0,a.__)("Choose how messages are displayed visually.","chatlog-block")}),(0,l.createElement)(o.ToggleControl,{label:(0,a.__)("Show Avatars","chatlog-block"),checked:h,onChange:e=>s({showAvatars:e}),help:(0,a.__)("Display participant avatars with Gravatar integration and initials fallback.","chatlog-block")}),(0,l.createElement)(o.ToggleControl,{label:(0,a.__)("Show Timestamps","chatlog-block"),checked:p,onChange:e=>s({showTimestamps:e})}),p&&(0,l.createElement)(o.SelectControl,{label:(0,a.__)("Timestamp Format","chatlog-block"),value:b,options:[{label:(0,a.__)("Time Only (10:23 AM)","chatlog-block"),value:"time-only"},{label:(0,a.__)("Absolute (Jan 15, 2025 10:23 AM)","chatlog-block"),value:"absolute"},{label:(0,a.__)("Relative (2 hours ago)","chatlog-block"),value:"relative"}],onChange:e=>s({timestampFormat:e})}),(0,l.createElement)(o.SelectControl,{label:(0,a.__)("Device Frame","chatlog-block"),value:_,options:[{label:(0,a.__)("None","chatlog-block"),value:"none"},{label:(0,a.__)("Phone","chatlog-block"),value:"phone"},{label:(0,a.__)("Desktop","chatlog-block"),value:"desktop"},{label:(0,a.__)("Slack App","chatlog-block"),value:"slack-app"},{label:(0,a.__)("Discord App","chatlog-block"),value:"discord-app"}],onChange:e=>s({deviceFrame:e}),help:(0,a.__)("Display the chat in a device mockup frame.","chatlog-block")})),(0,l.createElement)(o.PanelBody,{title:(0,a.__)("Threading","chatlog-block"),initialOpen:!1},(0,l.createElement)(o.ToggleControl,{label:(0,a.__)("Collapse Threads","chatlog-block"),checked:g,onChange:e=>s({collapseThreads:e}),help:(0,a.__)("Collapse threaded replies by default. Users can expand them.","chatlog-block")})),(0,l.createElement)(o.PanelBody,{title:(0,a.__)("Participants","chatlog-block"),initialOpen:!1},(0,l.createElement)(o.ToggleControl,{label:(0,a.__)("Show Participant List","chatlog-block"),checked:u,onChange:e=>s({showParticipantList:e}),help:(0,a.__)("Display a list of all participants at the top of the transcript.","chatlog-block")}),(0,l.createElement)(o.TextControl,{label:(0,a.__)("Highlight User","chatlog-block"),value:d,onChange:e=>s({highlightCurrentUser:e}),help:(0,a.__)('Enter a username to highlight (useful for "you" styling). Leave empty for no highlighting.',"chatlog-block"),placeholder:(0,a.__)("e.g., Courtney Robertson","chatlog-block")})),(0,l.createElement)(o.PanelBody,{title:(0,a.__)("Advanced","chatlog-block"),initialOpen:!1},(0,l.createElement)(o.TextControl,{label:(0,a.__)("Maximum Visible Messages","chatlog-block"),type:"number",value:m,onChange:e=>s({maxVisibleMessages:parseInt(e)||0}),help:(0,a.__)("Limit displayed messages for long transcripts. 0 = show all.","chatlog-block"),min:0}))),(0,l.createElement)("div",{...f},k&&"auto"===n&&(0,l.createElement)(o.Notice,{status:"info",isDismissible:!1},(0,a.__)("Detected:","chatlog-block")," ",k," (",T,"% ",(0,a.__)("confidence","chatlog-block"),")"),(0,l.createElement)(o.TextareaControl,{label:(0,a.__)("Paste Your Chat Transcript","chatlog-block"),value:r,onChange:e=>s({rawTranscript:e}),placeholder:(0,a.__)("Paste your chat transcript here.\n\nSupported formats:\n• Chat platforms: Slack, Discord, Teams, WhatsApp, Telegram, Signal\n• Transcript formats: VTT, SRT, TXT, MD, DOC, HTML, RTF\n\nAuto-detection will identify the format automatically.","chatlog-block"),rows:15,className:"chatlog-transcript-input",help:(0,a.__)("Copy your chat messages and paste them here. Chat Log will automatically detect the platform and format.","chatlog-block")}),r&&(0,l.createElement)("div",{className:"chatlog-preview-notice"},(0,l.createElement)(o.Notice,{status:"success",isDismissible:!1},(0,a.__)("Preview will appear on the frontend. The transcript will be parsed and displayed according to your settings.","chatlog-block")))))},save:()=>null})}},a={};function t(e){var o=a[e];if(void 0!==o)return o.exports;var c=a[e]={exports:{}};return l[e](c,c.exports,t),c.exports}t.m=l,e=[],t.O=(l,a,o,c)=>{if(!a){var s=1/0;for(h=0;h<e.length;h++){for(var[a,o,c]=e[h],r=!0,n=0;n<a.length;n++)(!1&c||s>=c)&&Object.keys(t.O).every(e=>t.O[e](a[n]))?a.splice(n--,1):(r=!1,c<s&&(s=c));if(r){e.splice(h--,1);var i=o();void 0!==i&&(l=i)}}return l}c=c||0;for(var h=e.length;h>0&&e[h-1][2]>c;h--)e[h]=e[h-1];e[h]=[a,o,c]},t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};t.O.j=l=>0===e[l];var l=(l,a)=>{var o,c,[s,r,n]=a,i=0;if(s.some(l=>0!==e[l])){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(n)var h=n(t)}for(l&&l(a);i<s.length;i++)c=s[i],t.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return t.O(h)},a=globalThis.webpackChunk=globalThis.webpackChunk||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var o=t.O(void 0,[350],()=>t(600));o=t.O(o)})();